-- 房屋专项维修资金日核对平衡表（T+1）
-- 0. 前提性校验
----- 对账前会先拉一下流水，然后看，上一日的流水是否是都落库了，如果都落库了，那么进行对账处理，如果存在未落库的流水，那么流水一致性校验失败，不进行对账
-- 1. 实账平衡
----- 1.1 实际期初平衡
--------- 1.1.1 如果没有上日实际期末(是第一天)，那么就是当时账户的余额
--------------- （1）银行 -> HxWaterDetail -> actualBal
--------------- （2）系统 -> RealAcctWater -> endBal
--------- 1.1.2 如果存在上日实际期末，则取该值
----- 1.2 入账
--------- 1.2.1 借方入账
--------------- （1）银行 -> HxWaterDetail -> sum(tranAmt) -> tranDate -> CR_DR_MAINT_IND = 'D'
--------------- （2）系统 -> RealAcctWater -> sum(tranAmt) -> tranDate -> tranFlag = '1'
--------- 1.2.1 贷方入账
--------------- （1）银行 -> HxWaterDetail -> sum(tranAmt) -> tranDate -> CR_DR_MAINT_IND = 'C'
--------------- （2）系统 -> RealAcctWater -> sum(tranAmt) -> tranDate -> tranFlag = '2'
----- 1.3 实际期末平衡
--------- 1.3.1 （可选）当时账户的余额 -> TODO：那么是否需要验证获取的期末余额和计算的期末余额是否相当？
--------- 1.3.1 （可选）本期期初余额 + 本期发生额
----- 1.4 是否平账
-- 2. 调整平衡
----- 2.1 调整前余额
--------- 本期实际期末余额
----- 2.2 应加
--------- 2.2.1 历史应加调整项
--------------- （1）历史借方挂账总和 -> 可以通过计算得出的本期“T0前借方清账”进行动态减少
--------------- （2）其他借方款项金额 -> 手动减少
--------- 2.2.2 T0后借方挂账余额 TODO：？不懂
----- 2.3 应减
--------- 2.3.1 历史应减调整项
--------------- （1）历史贷方挂账总和 -> 可以通过计算得出的本期“T0前贷方清账”进行动态减少
--------------- （2）其他贷方款项金额 -> 手动减少
--------- 2.3.2 T0后贷方挂账余额 TODO：？不懂
----- 2.4 调整后余额
--------- 调整前金额 + 应加金额 - 应减金额
----- 2.5 不参与计算，仅记录的项目
--------- 2.5.1 T0前借方清账
--------- 2.5.2 T0前贷方清账
----- 2.6 是否平账
-- 3. 双边发生额平衡
----- 3.1 双边期初余额
--------- 调整后余额
----- 3.2 挂账
--------- 3.2.1 贷方挂账
--------------- （1）银行 -> HxWaterDiffNew -> sum(newDiffAmt - clearAmt) -> clearDate -> CRDR = 'D' & DIFFSOURCE = 'B'
--------------- （2）系统 -> HxWaterDiffNew -> sum(newDiffAmt - clearAmt) -> clearDate -> CRDR = 'D' & DIFFSOURCE = 'T'
--------- 3.2.1 借方挂账
--------------- （1）银行 -> HxWaterDiffNew -> sum(newDiffAmt - clearAmt) -> clearDate -> CRDR = 'C' & DIFFSOURCE = 'B'
--------------- （2）系统 -> HxWaterDiffNew -> sum(newDiffAmt - clearAmt) -> clearDate -> CRDR = 'C' & DIFFSOURCE = 'T'
----- 3.3 清账
--------- 3.3.1 贷方清账
--------------- （1）银行 -> HxWaterDiffClear -> sum(clearAmt) -> clearDate -> CRDR = 'D' & NEW.DIFFSOURCE = 'T'
--------------- （2）系统 -> HxWaterDiffClear -> sum(clearAmt) -> clearDate -> CRDR = 'D' & NEW.DIFFSOURCE = 'B'
--------- 3.3.1 借方清账
--------------- （1）银行 -> HxWaterDiffClear -> sum(clearAmt) -> clearDate -> CRDR = 'C' & NEW.DIFFSOURCE = 'T'
--------------- （2）系统 -> HxWaterDiffClear -> sum(clearAmt) -> clearDate -> CRDR = 'C' & NEW.DIFFSOURCE = 'B'
----- 3.4 双边发生额
--------- （1）银行（借/贷） -> 银行流水发生额（借/贷） - 银行挂账余额（借/贷） + 系统清账余额（借/贷）
--------- （2）系统（借/贷） -> 系统流水发生额（借/贷） - 系统挂账金额（借/贷） + 银行清账余额（借/贷）
----- 3.5 双边期末余额
--------- （1）银行 -> 银行期初余额 + 银行贷方发生额 - 银行借方发生额
--------- （2）系统 -> 系统期初余额 + 系统贷方发生额 - 系统借方发生额
----- 3.6 是否平账